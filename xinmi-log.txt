登录功能
要先去腾讯云弄好短信验证码
在项目代码测试短信验证码并测试通过

登录流程的话，目前提供两种登录方式：
1. 手机验证码的方式
2. 账号密码的方式
- 初次使用默认是手机验证码的方式，之后是默认最近的一种登录方式

手机验证码登录的方式：
服务端生成6位随机数发送到客户端，
客户端将手机号和验证码上传到服务端，
服务端验证手机号和验证码{
	如果有，则登录成功，
	如果没有，则注册该用户并登录{
		初始的账号为手机号，
		初始密码为空但是是非法的，所以账号密码方式登录不进来。
		登录后可以提供修改密码的功能，然后找回密码的功能也要相应的改动
	}
}
麻蛋！接入验证码，必须要限制一天一次！！！！！！！！！！！！！！！！！！！！！！！！！
手机验证码目前条件不允许！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
目前只能改为邮箱验证码！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！

上面这个任务算是通过了吧。
开始写登录页面：
邮箱验证码登录（新的视图）、帮助、用户协议和隐私政策的页面、找回密码的页面。


所以呢，采用手机号注册更为方便，账号密码注册的方式去掉。
找回密码有两种方式：
1. 手机验证码（暂不管）
2. 邮箱验证码
得到对应的验证码后，用户设置新密码、确认密码即可。

【完成】用户协议和隐私政策

【完成】邮箱登录页面的前端

【完成】账号密码登录的前端

【完成】忘记密码的前端

【完成】封装发送验证码按钮的前端

【完成】系统设置提供绑定邮箱的前端

【完成】系统设置提供修改密码的前端

【完成】系统设置提供修改账号的前端

【完成】登录页面的协议勾选框的前端

【完成】登录页面的发送验证码接口

【完成】登录页面的邮箱登录接口

账号应命名为信迷号，类似QQ号
【完成】js生成5位及以上信迷号算法：应以5位开始
这样子的，从数据库的用户表找到xm_id的最大值+1作为当前的信迷号。目前不可修改类似QQ号的作用。
所以这就有个问题了，微信号为什么要另外命名，为什么不跟qq号一样是个数字字符串？不懂。

现在把，修改账号功能去掉。

妈耶，生成id的算法需要用到正则表达式截取字符串。
算法是这样的{
	大于等于10000的数字简单计算，
	小于10000{
		将字符串截取为两段，前一段0后一段非0开头{
			截取0开头：/^0*(?!0)/
			然后直接截取剩余字符串
		}
		将非0开头的字符串转成数字再+1，
		再将两段合起来，
		最后从尾到头截取长度为5的字符串，得到结果
	}
}
总算完成。

【完成】登录页面的找回密码修改密码接口

【完成】系统设置的绑定新邮箱的接口

【完成】系统设置的修改密码的接口。复用上面那个找回密码的接口

【暂不做这功能】系统设置的修改账号的接口

【完成】对接邮箱登录

【完成】对接找回密码

【完成】对接系统设置绑定新邮箱

【完成】对接修改密码

【完成】审查并优化前端代码（优化API方法）

【完成】审查并优化后端代码（优化API方法）

------------------------------------------------------------------------------------------------------------------------
【完成】后端处理路由未找到的404错误

【完成】将前端、后端项目合并为一个项目，统一用一个git仓库来管理
参考这篇文章进行迁移：https://swmlee.com/2019/12/27/technicalessays/aboutgit/15combine-projects/

【完成】测试并修复联系人相关功能，修改了表结构（添加联系握手记录表）

【完成】修改待确认的联系人列表
把当前用户的联系记录表的xinmi_contact_record的userId为当前的userId
返回联系人的userId, username, contactName, avatarUrl, status
前端的展示1为已发送验证、2为按钮（接受）、3 已添加
- 关于联系人的名称展示，前面做的设计是正确的，在新增的时候即数据入口就对数据进行归一化，避免了之后
各种依赖此数据的复杂化，所以简化了。

------------------------------------------------------------------------------------------------------------------------
【完成】难以测试，搭建测试环境---》去申请多个qq邮箱，开头smtp再在手机统一接收邮箱。

【完成】修复 联系人的名称问题（contactName, username）

【完成】修改联系人的备注名（不长按了，信迷的理念是，易理解性和易操作性的场景更多）

【完成】删除联系人（物理删除），这个做了先。前端展示在联系人详情的右上角的三个点图标，点击再弹出菜单选项删除，点击删除，再提示，确定删除联系人xxxx吗？
目前删除联系人要把对应的联系人的对应握手记录删掉，双向删掉。。。（以后把消息记录也删掉）

【不做，这应用场景不行，以后有手机号可以这样子做】联系人详情页面还要显示联系人的邮箱

【完成】在联系人详情的头像旁还要显示信迷号

【完成】添加联系人要实时推送联系人提醒信息，优化socket io模块
 优化socket代码：
 - 模块化
 - 单例
 client端主要代码：
 初始化socket{	!!!注意，web类型的由于有刷新浏览器的操作，这个socket对象不能序列化json来保存到浏览器，所以刷新时要重新初始化socket。注意，是
 在登录之后的所有（授权的）的页面需要弄，但登录相关页面不需要，所以这里运用了一个统一的组件去弄这个。
 一般应用都需要有这样的类似拦截方面的考虑。
 }
 
 发送器和接收器的emit的名字，以「业务-功能模块」来命名
 
------------------------------------------------------------------------------------------------------------------------
发送接收消息模块

【完成】在小窗发送一条消息，并实时接收。发送出去，且成功入库后，调用socket接口把信息实时发出。

【完成】socket的发送消息后台再封装一下。

【完成】聊天窗口的下拉查看前面的消息。

【完成】消息列表的查看和数量。消息列表显示对方（头像、名称）和一条最新的消息内容时间。查询我的所有会话，对每个会话查询联系人、这个会话的最新一条消息内容

【完成】基本的dao 增删改查代码生成，目前把一些精力关注在了代码类型上了，
以后要引入类型模块解决这个问题。TypeScript应该能解决这个问题。

【实时显示未读消息提醒数量】发送接口触发，那么服务端的发送接口controller层成功发送后，接着推送给对应的客户端就行。需要显示未读消息数量，需要加字段改接口。
客户端将消息列表存为全局变量。消息列表初始化调用一次，然后全局监听socket。拿到数据再处理进行展示。

--------------------------------------------------------------------------------------------------------------

朋友圈的问题，信迷圈。。。

【】调整一点代码

【】list列表滚动懒加载（图片已有懒加载）

【】将那个没有更多的文案去掉































